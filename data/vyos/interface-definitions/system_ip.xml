<?xml version="1.0"?>
<interfaceDefinition>
  <node name="system">
    <children>
      <node name="ip" owner="${vyos_conf_scripts_dir}/system_ip.py">
        <properties>
          <help>IPv4 Settings</help>
          <!-- must be before any interface, check /opt/vyatta/sbin/priority.pl -->
          <priority>290</priority>
        </properties>
        <children>
          <node name="arp">
            <properties>
              <help>Parameters for ARP cache</help>
            </properties>
            <children>
              <!-- include start from arp-ndp-table-size.xml.i -->
              <leafNode name="table-size">
                <properties>
                  <help>Maximum number of entries to keep in the cache</help>
                  <completionHelp>
                    <list>1024 2048 4096 8192 16384 32768</list>
                  </completionHelp>
                  <constraint>
                    <regex>(1024|2048|4096|8192|16384|32768)</regex>
                  </constraint>
                </properties>
                <defaultValue>8192</defaultValue>
              </leafNode>
              <!-- include end -->
            </children>
          </node>
          <leafNode name="disable-forwarding">
            <properties>
              <help>Disable IPv4 forwarding on all interfaces</help>
              <valueless/>
            </properties>
          </leafNode>
          <leafNode name="disable-directed-broadcast">
            <properties>
              <help>Disable IPv4 directed broadcast forwarding on all interfaces</help>
              <valueless/>
            </properties>
          </leafNode>
          <node name="multipath">
            <properties>
              <help>IPv4 multipath settings</help>
            </properties>
            <children>
              <leafNode name="ignore-unreachable-nexthops">
                <properties>
                  <help>Ignore next hops that are not in the ARP table</help>
                  <valueless/>
                </properties>
              </leafNode>
              <leafNode name="layer4-hashing">
                <properties>
                  <help>Use layer 4 information for ECMP hashing</help>
                  <valueless/>
                </properties>
              </leafNode>
            </children>
          </node>
          <!-- include start from syslog-facility.xml.i -->
          <node name="nht">
            <properties>
              <help>Filter Next Hop tracking route resolution</help>
            </properties>
            <children>
              <leafNode name="no-resolve-via-default">
                <properties>
                  <help>Do not resolve via default route</help>
                  <valueless/>
                </properties>
              </leafNode>
            </children>
          </node>
          <!-- include end -->
          <node name="tcp">
            <properties>
              <help>IPv4 TCP parameters</help>
            </properties>
            <children>
              <node name="mss">
                <properties>
                  <help>IPv4 TCP MSS probing options</help>
                </properties>
                <children>
                  <leafNode name="probing">
                    <properties>
                      <help>Attempt to lower the MSS if TCP connections fail to establish</help>
                      <completionHelp>
                        <list>on-icmp-black-hole force</list>
                      </completionHelp>
                      <valueHelp>
                        <format>on-icmp-black-hole</format>
                        <description>Attempt TCP MSS probing when an ICMP black hole is detected</description>
                      </valueHelp>
                      <valueHelp>
                        <format>force</format>
                        <description>Attempt TCP MSS probing by default</description>
                      </valueHelp>
                      <constraint>
                        <regex>(on-icmp-black-hole|force)</regex>
                      </constraint>
                      <constraintErrorMessage>Must be on-icmp-black-hole or force</constraintErrorMessage>
                    </properties>
                  </leafNode>
                  <leafNode name="base">
                    <properties>
                      <help>Base MSS to start probing from (applicable to "probing force")</help>
                      <valueHelp>
                        <format>u32:48-1460</format>
                        <description>Base MSS value for probing (default: 1024)</description>
                      </valueHelp>
                      <constraint>
                        <validator name="numeric" argument="--range 48-1460"/>
                      </constraint>
                    </properties>
                  </leafNode>
                  <leafNode name="floor">
                    <properties>
                      <help>Minimum MSS to stop probing at (default: 48)</help>
                      <valueHelp>
                        <format>u32:48-1460</format>
                        <description>Minimum MSS value to probe</description>
                      </valueHelp>
                      <constraint>
                        <validator name="numeric" argument="--range 48-1460"/>
                      </constraint>
                    </properties>
                  </leafNode>
                </children>
              </node>
            </children>
          </node>
          <!-- include start from system-ip-protocol.xml.i -->
          <tagNode name="protocol">
            <properties>
              <help>Filter routing info exchanged between routing protocol and zebra</help>
              <completionHelp>
                <list>any babel bgp connected eigrp isis kernel ospf rip static table</list>
              </completionHelp>
              <valueHelp>
                <format>any</format>
                <description>Any of the above protocols</description>
              </valueHelp>
              <valueHelp>
                <format>babel</format>
                <description>Babel routing protocol</description>
              </valueHelp>
              <valueHelp>
                <format>bgp</format>
                <description>Border Gateway Protocol</description>
              </valueHelp>
              <valueHelp>
                <format>connected</format>
                <description>Connected routes (directly attached subnet or host)</description>
              </valueHelp>
              <valueHelp>
                <format>eigrp</format>
                <description>Enhanced Interior Gateway Routing Protocol</description>
              </valueHelp>
              <valueHelp>
                <format>isis</format>
                <description>Intermediate System to Intermediate System</description>
              </valueHelp>
              <valueHelp>
                <format>kernel</format>
                <description>Kernel routes (not installed via the zebra RIB)</description>
              </valueHelp>
              <valueHelp>
                <format>ospf</format>
                <description>Open Shortest Path First (OSPFv2)</description>
              </valueHelp>
              <valueHelp>
                <format>rip</format>
                <description>Routing Information Protocol</description>
              </valueHelp>
              <valueHelp>
                <format>static</format>
                <description>Statically configured routes</description>
              </valueHelp>
              <constraint>
                <regex>(any|babel|bgp|connected|eigrp|isis|kernel|ospf|rip|static|table)</regex>
              </constraint>
            </properties>
            <children>
              <!-- include start from route-map.xml.i -->
              <leafNode name="route-map">
                <properties>
                  <help>Specify route-map name to use</help>
                  <completionHelp>
                    <path>policy route-map</path>
                  </completionHelp>
                  <valueHelp>
                    <format>txt</format>
                    <description>Route map name</description>
                  </valueHelp>
                  <constraint>
                    <!-- include start from constraint/alpha-numeric-hyphen-underscore-dot.xml.i -->
                    <regex>[-_a-zA-Z0-9.]+</regex>
                    <!-- include end -->
                  </constraint>
                  <constraintErrorMessage>Name of route-map can only contain alpha-numeric letters, hyphen and underscores</constraintErrorMessage>
                </properties>
              </leafNode>
              <!-- include end -->
            </children>
          </tagNode>
          <!-- include end -->
        </children>
      </node>
    </children>
  </node>
</interfaceDefinition>
